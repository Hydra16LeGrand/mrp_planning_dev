<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="stock_picking_type_action_inherit" model="ir.actions.act_window">
        <field name="name">Manufacturing Overview</field>
        <field name="res_model">stock.picking.type</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_mode">kanban,form</field>
        <field name="domain">[('code', '=', 'mrp_operation')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new operation type
            </p>
            <p>
                The operation type system allows you to assign each stock
                operation a specific type which will alter its views accordingly.
                On the operation type you could e.g. specify if packing is needed by default,
                if it should show the customer.
            </p>
        </field>
    </record>

    <record id="view_stock_picking_type_form_inherit" model="ir.ui.view">
        <field name="name">stock.picking.type.form</field>
        <field name="model">stock.picking.type</field>
        <field name="inherit_id" ref="stock.view_picking_type_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/group/group[@name='locations']" position="after">
                <group string="Plant" groups="stock.group_stock_multi_locations" name="plant" attrs="{'invisible': [('code', 'not in', ('mrp_operation','internal'))]}">
                    <field name="plant_id" options="{'limit': 10, 'create': false, 'create_edit': false, 'no_create': true}"/>
                </group>
            </xpath>
        </field>
    </record>


    <record model="ir.actions.act_window" id="action_rm_main_factory">
        <field name="context">{'group_by': 'location_id'}</field>
        <field name="domain">[('location_id.plant_id.is_principal', '!=', False)]</field>
        <field name="name">RM main factory</field>
        <field name="res_model">stock.quant</field>
        <field name="view_id" ref="stock.view_stock_quant_tree"/>
    </record>

    <record model="ir.actions.act_window" id="action_rm_plastic_factory">
        <field name="context">{'group_by': 'location_id'}</field>
        <field name="domain">[('location_id.plant_id.is_principal', '!=', True)]</field>
        <field name="name">RM plastic factory</field>
        <field name="res_model">stock.quant</field>
        <field name="view_id" ref="stock.view_stock_quant_tree"/>
    </record>


    <menuitem id="mrp.menu_mrp_production_action" action="stock_picking_type_action_inherit"
              parent="mrp.menu_mrp_manufacturing" sequence="3"/>

    <menuitem id="menu_mrp_rm_main_factory" action="action_rm_main_factory"
              parent="mrp.menu_mrp_reporting" sequence="33"/>
    <menuitem id="menu_mrp_rm_plastic_factory" action="action_rm_plastic_factory"
              parent="mrp.menu_mrp_reporting" sequence="34"/>
</odoo>